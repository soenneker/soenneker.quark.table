@page "/search-position"
@using Microsoft.Extensions.Logging
@using Soenneker.Quark.Table.Enums
@using Soenneker.Quark.Table.Demo.Services

@inject ILogger<SearchPositionDemo> Logger
@inject EmployeeService EmployeeService

<PageTitle>Search Position Demo - QuarkTable</PageTitle>

<div class="container-fluid">
    <div class="row">
        <div class="col-12">
            <nav aria-label="breadcrumb">
                <ol class="breadcrumb">
                    <li class="breadcrumb-item"><a href="/">Home</a></li>
                    <li class="breadcrumb-item active" aria-current="page">Search Position Demo</li>
                </ol>
            </nav>
            
            <h1 class="display-4 mb-4">Search Position Demo</h1>
            <p class="lead mb-4">Demonstrating the different search box positions available in QuarkTable.</p>
        </div>
    </div>

    <!-- Search at Start (Left) -->
    <div class="row mb-5">
        <div class="col-12">
            <div class="card">
                <div class="card-header">
                    <h3><i class="fas fa-align-left text-primary"></i> Search at Start (Left)</h3>
                    <p class="text-muted mb-0">Search box positioned at the beginning of the controls area</p>
                </div>
                <div class="card-body">
                    <QuarkTable @ref="startSearchTable" 
                                OnServerSideRequest="HandleServerSideRequest"
                                OnSearch="HandleSearch"
                                OnOrder="HandleOrder"
                                ShowSearch="true"
                                SearchPlaceholder="Search employees..."
                                Options="startSearchOptions">
                    </QuarkTable>
                </div>
            </div>
        </div>
    </div>
    
    <!-- Search in Center -->
    <div class="row mb-5">
        <div class="col-12">
            <div class="card">
                <div class="card-header">
                    <h3><i class="fas fa-align-center text-success"></i> Search in Center</h3>
                    <p class="text-muted mb-0">Search box positioned in the center of the controls area</p>
                </div>
                <div class="card-body">
                    <QuarkTable @ref="centerSearchTable" 
                                OnServerSideRequest="HandleServerSideRequest"
                                OnSearch="HandleSearch"
                                OnOrder="HandleOrder"
                                ShowSearch="true"
                                SearchPlaceholder="Search employees..."
                                Options="centerSearchOptions">
                    </QuarkTable>
                </div>
            </div>
        </div>
    </div>
    
    <!-- Search at End (Right) -->
    <div class="row mb-5">
        <div class="col-12">
            <div class="card">
                <div class="card-header">
                    <h3><i class="fas fa-align-right text-info"></i> Search at End (Right) - Default</h3>
                    <p class="text-muted mb-0">Search box positioned at the end of the controls area (default behavior)</p>
                </div>
                <div class="card-body">
                    <QuarkTable @ref="endSearchTable" 
                                OnServerSideRequest="HandleServerSideRequest"
                                OnSearch="HandleSearch"
                                OnOrder="HandleOrder"
                                ShowSearch="true"
                                SearchPlaceholder="Search employees..."
                                Options="endSearchOptions">
                    </QuarkTable>
                </div>
            </div>
        </div>
    </div>

    <!-- Comparison Table -->
    <div class="row">
        <div class="col-12">
            <div class="card">
                <div class="card-header">
                    <h3>Search Position Comparison</h3>
                </div>
                <div class="card-body">
                    <div class="table-responsive">
                        <table class="table table-bordered">
                            <thead class="table-light">
                                <tr>
                                    <th>Position</th>
                                    <th>Description</th>
                                    <th>Use Case</th>
                                    <th>CSS Class</th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <td><strong>Start</strong></td>
                                    <td>Search box appears on the left side</td>
                                    <td>When search is the primary action</td>
                                    <td><code>quark-table-search-start</code></td>
                                </tr>
                                <tr>
                                    <td><strong>Center</strong></td>
                                    <td>Search box appears in the center</td>
                                    <td>Balanced layout with other controls</td>
                                    <td><code>quark-table-search-center</code></td>
                                </tr>
                                <tr>
                                    <td><strong>End</strong></td>
                                    <td>Search box appears on the right side</td>
                                    <td>Traditional layout (default)</td>
                                    <td><code>quark-table-search-end</code></td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

@code {
    private QuarkTable? startSearchTable;
    private QuarkTable? centerSearchTable;
    private QuarkTable? endSearchTable;


    // Search position options
    private QuarkTableOptions startSearchOptions = new()
    {
        DefaultPageSize = 8,
        ShowSearch = true,
        ShowPagination = true,
        ShowPageSizeSelector = true,
        Sortable = true,
        SearchPosition = SearchPosition.Start,
        SearchPlaceholder = "Search employees..."
    };

    private QuarkTableOptions centerSearchOptions = new()
    {
        DefaultPageSize = 8,
        ShowSearch = true,
        ShowPagination = true,
        ShowPageSizeSelector = true,
        Sortable = true,
        SearchPosition = SearchPosition.Center,
        SearchPlaceholder = "Search employees..."
    };

    private QuarkTableOptions endSearchOptions = new()
    {
        DefaultPageSize = 8,
        ShowSearch = true,
        ShowPagination = true,
        ShowPageSizeSelector = true,
        Sortable = true,
        SearchPosition = SearchPosition.End,
        SearchPlaceholder = "Search employees..."
    };

    protected override async Task OnInitializedAsync()
    {
        // EmployeeService is automatically initialized
    }

    private async Task<QuarkTableResponse> HandleServerSideRequest(QuarkTableRequest request)
    {
        return await EmployeeService.GetEmployees(request);
    }

    private async Task HandleSearch(string searchTerm)
    {
        Logger.LogInformation("Search performed: {SearchTerm}", searchTerm);
    }

    private async Task HandleOrder(QuarkTableOrderEventArgs args)
    {
        Logger.LogInformation("Column '{Column}' sorted {Direction}", args.Column, args.Direction);
    }


} 