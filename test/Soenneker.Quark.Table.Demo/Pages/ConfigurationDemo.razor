@page "/configuration"
@using Microsoft.Extensions.Logging
@using Soenneker.Quark.Table.Enums
@using Soenneker.Quark.Table.Demo.Services

@inject ILogger<ConfigurationDemo> Logger
@inject EmployeeService EmployeeService

<PageTitle>Configuration Demo - QuarkTable</PageTitle>

<div class="container-fluid">
    <div class="row">
        <div class="col-12">
            <nav aria-label="breadcrumb">
                <ol class="breadcrumb">
                    <li class="breadcrumb-item"><a href="/">Home</a></li>
                    <li class="breadcrumb-item active" aria-current="page">Configuration Demo</li>
                </ol>
            </nav>
            
            <h1 class="display-4 mb-4">Configuration Demo</h1>
            <p class="lead mb-4">Exploring different configuration options and settings for QuarkTable.</p>
        </div>
    </div>

    <!-- Minimal Configuration -->
    <div class="row mb-5">
        <div class="col-12">
            <div class="card">
                <div class="card-header">
                    <h3><i class="fas fa-cog text-primary"></i> Minimal Configuration</h3>
                    <p class="text-muted mb-0">Basic table with minimal options - no search, no pagination, no sorting</p>
                </div>
                <div class="card-body">
                    <QuarkTable @ref="minimalTable" 
                                OnServerSideRequest="HandleServerSideRequest"
                                Options="minimalOptions">
                    </QuarkTable>
                </div>
            </div>
        </div>
    </div>

    <!-- Full Featured Configuration -->
    <div class="row mb-5">
        <div class="col-12">
            <div class="card">
                <div class="card-header">
                    <h3><i class="fas fa-star text-success"></i> Full Featured Configuration</h3>
                    <p class="text-muted mb-0">Complete table with all features enabled</p>
                </div>
                <div class="card-body">
                    <QuarkTable @ref="fullFeaturedTable" 
                                OnServerSideRequest="HandleServerSideRequest"
                                OnSearch="HandleSearch"
                                OnOrder="HandleOrder"
                                ShowSearch="true"
                                SearchPlaceholder="Search employees..."
                                Options="fullFeaturedOptions">
                    </QuarkTable>
                </div>
            </div>
        </div>
    </div>

    <!-- Custom Page Size Options -->
    <div class="row mb-5">
        <div class="col-12">
            <div class="card">
                <div class="card-header">
                    <h3><i class="fas fa-list-ol text-info"></i> Custom Page Size Options</h3>
                    <p class="text-muted mb-0">Table with custom page size options: 5, 15, 30, 50</p>
                </div>
                <div class="card-body">
                    <QuarkTable @ref="customPageSizeTable" 
                                OnServerSideRequest="HandleServerSideRequest"
                                OnSearch="HandleSearch"
                                OnOrder="HandleOrder"
                                ShowSearch="true"
                                SearchPlaceholder="Search employees..."
                                Options="customPageSizeOptions">
                    </QuarkTable>
                </div>
            </div>
        </div>
    </div>

    <!-- No Info Display -->
    <div class="row mb-5">
        <div class="col-12">
            <div class="card">
                <div class="card-header">
                    <h3><i class="fas fa-eye-slash text-warning"></i> No Info Display</h3>
                    <p class="text-muted mb-0">Table without the "Showing X to Y of Z entries" info</p>
                </div>
                <div class="card-body">
                    <QuarkTable @ref="noInfoTable" 
                                OnServerSideRequest="HandleServerSideRequest"
                                OnSearch="HandleSearch"
                                OnOrder="HandleOrder"
                                ShowSearch="true"
                                SearchPlaceholder="Search employees..."
                                Options="noInfoOptions">
                    </QuarkTable>
                </div>
            </div>
        </div>
    </div>

    <!-- Configuration Comparison -->
    <div class="row">
        <div class="col-12">
            <div class="card">
                <div class="card-header">
                    <h3>Configuration Options Comparison</h3>
                </div>
                <div class="card-body">
                    <div class="table-responsive">
                        <table class="table table-bordered">
                            <thead class="table-light">
                                <tr>
                                    <th>Option</th>
                                    <th>Minimal</th>
                                    <th>Full Featured</th>
                                    <th>Custom Page Size</th>
                                    <th>No Info</th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <td><strong>Search</strong></td>
                                    <td><i class="fas fa-times text-danger"></i></td>
                                    <td><i class="fas fa-check text-success"></i></td>
                                    <td><i class="fas fa-check text-success"></i></td>
                                    <td><i class="fas fa-check text-success"></i></td>
                                </tr>
                                <tr>
                                    <td><strong>Sorting</strong></td>
                                    <td><i class="fas fa-times text-danger"></i></td>
                                    <td><i class="fas fa-check text-success"></i></td>
                                    <td><i class="fas fa-check text-success"></i></td>
                                    <td><i class="fas fa-check text-success"></i></td>
                                </tr>
                                <tr>
                                    <td><strong>Pagination</strong></td>
                                    <td><i class="fas fa-times text-danger"></i></td>
                                    <td><i class="fas fa-check text-success"></i></td>
                                    <td><i class="fas fa-check text-success"></i></td>
                                    <td><i class="fas fa-check text-success"></i></td>
                                </tr>
                                <tr>
                                    <td><strong>Page Size Selector</strong></td>
                                    <td><i class="fas fa-times text-danger"></i></td>
                                    <td><i class="fas fa-check text-success"></i></td>
                                    <td><i class="fas fa-check text-success"></i></td>
                                    <td><i class="fas fa-check text-success"></i></td>
                                </tr>
                                <tr>
                                    <td><strong>Info Display</strong></td>
                                    <td><i class="fas fa-times text-danger"></i></td>
                                    <td><i class="fas fa-check text-success"></i></td>
                                    <td><i class="fas fa-check text-success"></i></td>
                                    <td><i class="fas fa-times text-danger"></i></td>
                                </tr>
                                <tr>
                                    <td><strong>Default Page Size</strong></td>
                                    <td>10</td>
                                    <td>10</td>
                                    <td>15</td>
                                    <td>10</td>
                                </tr>
                                <tr>
                                    <td><strong>Page Size Options</strong></td>
                                    <td>10, 25, 50, 100</td>
                                    <td>10, 25, 50, 100</td>
                                    <td>5, 15, 30, 50</td>
                                    <td>10, 25, 50, 100</td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

@code {
    private QuarkTable? minimalTable;
    private QuarkTable? fullFeaturedTable;
    private QuarkTable? customPageSizeTable;
    private QuarkTable? noInfoTable;


    // Minimal configuration
    private QuarkTableOptions minimalOptions = new()
    {
        DefaultPageSize = 10,
        ShowSearch = false,
        ShowPagination = false,
        ShowPageSizeSelector = false,
        Sortable = false,
        ShowInfo = false,
        ServerSide = true
    };

    // Full featured configuration
    private QuarkTableOptions fullFeaturedOptions = new()
    {
        DefaultPageSize = 10,
        ShowSearch = true,
        ShowPagination = true,
        ShowPageSizeSelector = true,
        Sortable = true,
        ShowInfo = true,
        ServerSide = true,
        SearchPosition = SearchPosition.End
    };

    // Custom page size options
    private QuarkTableOptions customPageSizeOptions = new()
    {
        DefaultPageSize = 15,
        PageSizeOptions = [5, 15, 30, 50],
        ShowSearch = true,
        ShowPagination = true,
        ShowPageSizeSelector = true,
        Sortable = true,
        ShowInfo = true,
        ServerSide = true,
        SearchPosition = SearchPosition.End
    };

    // No info display
    private QuarkTableOptions noInfoOptions = new()
    {
        DefaultPageSize = 10,
        ShowSearch = true,
        ShowPagination = true,
        ShowPageSizeSelector = true,
        Sortable = true,
        ShowInfo = false,
        ServerSide = true,
        SearchPosition = SearchPosition.End
    };

    protected override async Task OnInitializedAsync()
    {
        // EmployeeService is automatically initialized
    }

    private async Task<QuarkTableResponse> HandleServerSideRequest(QuarkTableRequest request)
    {
        return await EmployeeService.GetEmployees(request);
    }

    private async Task HandleSearch(string searchTerm)
    {
        Logger.LogInformation("Search performed: {SearchTerm}", searchTerm);
    }

    private async Task HandleOrder(QuarkTableOrderEventArgs args)
    {
        Logger.LogInformation("Column '{Column}' sorted {Direction}", args.Column, args.Direction);
    }


} 